<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Coin Games | Telegram</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notifications"></div>
    
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div class="container" id="mainScreen">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header glass">
            <div class="user-avatar">
                <div class="avatar-placeholder" id="userAvatar">üë§</div>
            </div>
            <div class="user-name" id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="user-id" id="userId">ID: ---</div>
        </div>
        
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –±–∞–ª–∞–Ω—Å–∞ -->
        <div class="balance-card glass">
            <div class="balance-label">–í–∞—à –±–∞–ª–∞–Ω—Å</div>
            <div class="balance-amount">
                <span id="balanceAmount">0</span>
                <div class="coin-icon">ü™ô</div>
            </div>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
        <div class="actions-grid">
            <button class="btn btn-primary" onclick="showScreen('games')">
                <div class="btn-icon">üéÆ</div>
                <div class="btn-text">–ò–≥—Ä—ã</div>
            </button>
            
            <button class="btn btn-secondary" onclick="showScreen('transfer')">
                <div class="btn-icon">üí∏</div>
                <div class="btn-text">–ü–µ—Ä–µ–≤–æ–¥</div>
            </button>
            
            <button class="btn btn-secondary" onclick="showScreen('history')">
                <div class="btn-icon">üìä</div>
                <div class="btn-text">–ò—Å—Ç–æ—Ä–∏—è</div>
            </button>
            
            <button class="btn btn-secondary" onclick="showAdminPanel()" id="adminBtn" style="display: none;">
                <div class="btn-icon">‚öôÔ∏è</div>
                <div class="btn-text">–ê–¥–º–∏–Ω</div>
            </button>
        </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –∏–≥—Ä -->
    <div class="container games-screen" id="gamesScreen">
        <div class="game-card glass">
            <h2 class="game-title">üé≤ –ò–≥—Ä–∞ –≤ –∫–æ—Å—Ç–∏</h2>
            <div class="dice-game">
                <div class="dice-container">
                    <div class="dice" id="dice">
                        <div class="dice-face">1</div>
                        <div class="dice-face">2</div>
                        <div class="dice-face">3</div>
                        <div class="dice-face">4</div>
                        <div class="dice-face">5</div>
                        <div class="dice-face">6</div>
                    </div>
                </div>
                <div id="diceResult"></div>
                
                <div class="bet-controls">
                    <button class="bet-btn" id="decreaseDiceBet">-</button>
                    <div class="bet-amount" id="diceBet">100</div>
                    <button class="bet-btn" id="increaseDiceBet">+</button>
                </div>
                
                <button class="roll-btn" id="rollDice">–ë–†–û–°–ò–¢–¨ –ö–û–°–¢–ò</button>
            </div>
        </div>
        
        <div class="game-card glass">
            <h2 class="game-title">üé∞ –ò–≥—Ä–æ–≤—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã</h2>
            <div class="slots-game">
                <div class="slots-container">
                    <div class="slot-reel" id="reel1"></div>
                    <div class="slot-reel" id="reel2"></div>
                    <div class="slot-reel" id="reel3"></div>
                </div>
                <div id="slotsResult"></div>
                
                <div class="bet-controls">
                    <button class="bet-btn" id="decreaseSlotsBet">-</button>
                    <div class="bet-amount" id="slotsBet">100</div>
                    <button class="bet-btn" id="increaseSlotsBet">+</button>
                </div>
                
                <button class="spin-btn" id="spinSlots">–ö–†–£–¢–ò–¢–¨</button>
            </div>
        </div>
        
        <button class="btn btn-secondary" onclick="showScreen('main')" style="margin-top: 20px;">
            <div class="btn-icon">‚Üê</div>
            <div class="btn-text">–ù–∞–∑–∞–¥</div>
        </button>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –ø–µ—Ä–µ–≤–æ–¥–∞ -->
    <div class="container games-screen" id="transferScreen">
        <div class="game-card glass">
            <h2 class="game-title">üí∏ –ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h2>
            <div style="padding: 20px;">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.7);">
                        Telegram ID –¥—Ä—É–≥–∞:
                    </label>
                    <input type="number" id="friendId" 
                           style="width: 100%; padding: 12px; border-radius: 12px; 
                                  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); 
                                  color: white; font-size: 16px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.7);">
                        –°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞:
                    </label>
                    <input type="number" id="transferAmount" value="100"
                           style="width: 100%; padding: 12px; border-radius: 12px; 
                                  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); 
                                  color: white; font-size: 16px;">
                </div>
                
                <div style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.7);">
                        –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
                    </label>
                    <input type="text" id="transferComment" placeholder="–ü–µ—Ä–µ–≤–æ–¥ –¥—Ä—É–≥—É"
                           style="width: 100%; padding: 12px; border-radius: 12px; 
                                  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); 
                                  color: white; font-size: 16px;">
                </div>
                
                <button class="btn btn-primary" onclick="makeTransfer()" style="width: 100%;">
                    <div class="btn-text">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</div>
                </button>
            </div>
        </div>
        
        <button class="btn btn-secondary" onclick="showScreen('main')" style="margin-top: 20px;">
            <div class="btn-icon">‚Üê</div>
            <div class="btn-text">–ù–∞–∑–∞–¥</div>
        </button>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –∏—Å—Ç–æ—Ä–∏–∏ -->
    <div class="container games-screen" id="historyScreen">
        <div class="game-card glass">
            <h2 class="game-title">üìä –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</h2>
            <div id="historyList" style="min-height: 300px; padding: 10px;">
                <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.5);">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...
                </div>
            </div>
        </div>
        
        <button class="btn btn-secondary" onclick="showScreen('main')" style="margin-top: 20px;">
            <div class="btn-icon">‚Üê</div>
            <div class="btn-text">–ù–∞–∑–∞–¥</div>
        </button>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –∞–¥–º–∏–Ω–∞ -->
    <div class="container games-screen" id="adminScreen">
        <div class="game-card glass">
            <h2 class="game-title">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
            <div style="padding: 20px;">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.7);">
                        Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
                    </label>
                    <input type="number" id="adminUserId" 
                           style="width: 100%; padding: 12px; border-radius: 12px; 
                                  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); 
                                  color: white; font-size: 16px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: rgba(255,255,255,0.7);">
                        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç:
                    </label>
                    <input type="number" id="adminAmount" value="1000"
                           style="width: 100%; padding: 12px; border-radius: 12px; 
                                  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); 
                                  color: white; font-size: 16px;">
                </div>
                
                <button class="btn btn-primary" onclick="adminAddCoins()" style="width: 100%; margin-bottom: 10px;">
                    <div class="btn-text">–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–µ—Ç—ã</div>
                </button>
                
                <button class="btn btn-secondary" onclick="adminGetAllUsers()" style="width: 100%;">
                    <div class="btn-text">–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </button>
            </div>
        </div>
        
        <button class="btn btn-secondary" onclick="showScreen('main')" style="margin-top: 20px;">
            <div class="btn-icon">‚Üê</div>
            <div class="btn-text">–ù–∞–∑–∞–¥</div>
        </button>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="supabase.js"></script>
    <script src="games.js"></script>
    <script src="app.js"></script>
</body>
</html>